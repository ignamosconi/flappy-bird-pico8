pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--flappy bird funcions
function check_start()
	if btn(⬆️) then
		inicio = true
	end
end


function flap_animation()
	-- aUMENTAMOS EL CONTADOR DE FRAMES, QUE SE EJECUTA UNA VEZ POR CADA UPDATE (A 60 FPS, EN ESTE CASO)
 frame_counter += 1
	
	-- cAMBIAMOS EL SPRITE CADA n FRAMES, EN ESTE CASO
 if frame_counter % 6 == 0 then
	 -- mOVER AL SIGUIENTE SPRITE
  sprite_index = (sprite_index % 4) + 1  -- alterna entre 1, 2 ... 5 (si fuese 10, pones %10)
  flappy_bird = secuencia[sprite_index]  -- asigna el sprite a la variable
 end

 -- sI MOSTRAMOS TODOS LOS SPRITES, FRENAMOS LA ANIMACION Y REINICIAMOS LA SECUENCIA
 if sprite_index == 4 then
     animation_running = false 
 end
	
end

function flap_animation_button()
    if btn(⬆️) and not animation_running then
        animation_running = true  -- iNICIA LA ANIMACION
        frame_counter = 0  -- rEINICIAMOS EL CONTADOR DE FRAMES
        sprite_index = 1  -- cOMIENZA EN EL INDICE 1 DE LA SECUENCIA DE SPRITES (VER INIT)
    end

    -- sI LA ANIMACION ESTA EN ESTADO RUNNING
    if animation_running then
       flap_animation()
    end
end



function gravedad_flappy()
	--mODIFICAMOS LA GRAVEDAD
	if ypos_bird < 114 then
		ypos_bird = ypos_bird + gravedad
		gravedad = gravedad + 0.15
	else
		ypos_bird = 114
		game_over = true
	end
	
	if ypos_bird < -25 then
		ypos_bird = -24
	end
	
end

function volar()
	--sALTO PRESIONADO? lA VARIABLE EXTRA "ALETEAR_PRESIONADO" PERMITE QUE NO SE SPAMEE EL BOTON	
	if btn(⬆️) then
		if aletear_presionado == false then
			gravedad = -2.2
			aletear_presionado = true
		end
	else
		aletear_presionado = false
	end
end
-->8
-- pipes functions

function tube_animation()
	
	xpos_tapa_abj -= 1
	
	if xpos_tapa_abj < -35 then
		xpos_tapa_abj = 127
	end
	
 return xpos_tapa_abj
	
end
-->8
--init

-- lA FUNCION INIT SE EJECUTA UNA SOLA VEZ AL INICIO DE CADA PROGRAMA
function _init()
		
		--[[
		
		background
		
		]]
		background_color = 12
		palt(0,false) --el negro no es transparente
		palt(12,true) --el celeste es transparente
		cls(background_color)
		
		
		--[[ 
		
		sprites flappy bird
		
		]]
		
		--pOSICION SPRITE
		xpos_bird = 30
		ypos_bird = 55
		
		--aNIMACION IDLE
		
		
		-- aNIMACION FLAP
		flappy_bird = 0 --nro sprite inicial
		secuencia = {2, 4, 2, 0} -- sprites usados en la animacion para un flap
		frame_counter = 0
		sprite_index = 1
		animation_running = false
		
		--[[ 
		sprites tuberias
		]]
		contador_tubo = 0
		
		
		xpos_tubo_arr = 60
		ypos_tubo_arr = 20
		xpos_tapa_arr = 60
		ypos_tapa_arr = 20
		
		xpos_tapa_abj = 127
		ypos_tapa_abj = 100
		xpos_tapa_arr = 60
		ypos_tapa_arr = 110
		
		
		
		--[[
		variables
		]]
		
		inicio = false
		game_over = false
		aletear_presionado = false
		
		gravedad = 0
end
-->8
--update60

--alternativamente _update(), actualiza las cosas 30 o 60 veces por segundo antes de dibujar las cosas	
function _update60()	

	if inicio == false and game_over == false then
		--eL PAJARO VUELA ESTATICO HASTA QUE SE PRESIONA UNA TECLA, MOMENTO EN EL CUAL LA GRAVEDAD ENTRA EN EFECTO
		check_start()
	end	
	
	
	if inicio == true and game_over == false then
		gravedad_flappy()
		volar()
	end


end
-->8
--draw

--dibujamos cosas segun lo que calculamos en update
function _draw()
	if game_over == false then

		cls(background_color)
		
		spr(64, tube_animation(), 100, 4,4)
	
		if inicio == false then
			spr(flappy_bird, xpos_bird, ypos_bird, 2, 2)
			flap_animation()
			
			
		end
		
		if inicio == true then
			spr(flappy_bird, xpos_bird, ypos_bird, 2, 2)
			flap_animation_button()
			
		end
	end
		
	if inicio == true and game_over == true then
		print("g a m e  o v e r")
		stop()
	end
		
	
	
	
	
	--dEBUGS
	--print("gravedad:".. gravedad .." | ypos:" .. ypos_bird)
 --print("flappy bird:" .. flappy_bird .. "| delay:" .. animation_delay .. "| c:" .. contador_animaciones)
end
__gfx__
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccc
cccc0077a070cccccccc0077a070cccccccc0077a070cccccccc0077e070cccccccc0077e070cccccccc0077e070cccccccc00778070cccccccc00778070cccc
ccc077aa07770cccccc077aa07770cccccc077aa07770cccccc077ee07770cccccc077ee07770cccccc077ee07770cccccc0778807770cccccc0778807770ccc
c0000aaa077070cccc0aaaaa077070cccc0aaaaa077070ccc0000eee077070cccc0eeeee077070cccc0eeeee077070ccc0000888077070cccc088888077070cc
077770aa077070ccc0aaaaaa077070ccc0aaaaaa077070cc077770ee077070ccc0eeeeee077070ccc0eeeeee077070cc07777088077070ccc0888888077070cc
0777770aa07770ccc00000aaa07770ccc0aaaaaaa07770cc0777770ee07770ccc00000eee07770ccc0eeeeeee07770cc07777708807770ccc0000088807770cc
0f777f0aaa00000c0777770aaa00000cc00000aaaa00000c0f777f0eee00000c0777770eee00000cc00000eeee00000c0f777f088800000c077777088800000c
c0fff0aaa08888800f777f0aa08888800f777f0aa0888880c0fff0eee08888800f777f0ee08888800f777f0ee0888880c0fff088809999900f777f0880999990
cc0009990800000cc00000990800000c077770990800000ccc0002220800000cc00000220800000c077770220800000ccc0008880900000cc00000880900000c
cc0999999088880ccc0999999088880c077f09999088880ccc0222222088880ccc0222222088880c077f02222088880ccc0888888099990ccc0888888099990c
ccc09999990000ccccc09999990000ccc0000999990000ccccc02222220000ccccc02222220000ccc0000222220000ccccc08888880000ccccc08888880000cc
cccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccc00000ccccccccccc00000ccccccccccc00000ccccccccccc00000ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccc00778070cccccccc0077f070cccccccc0077f070cccccccc0077f070cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccc0778807770cccccc077ff07770cccccc077ff07770cccccc077ff07770ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc088888077070ccc0000fff077070ccc0000fff077070ccc0000fff077070cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
c0888888077070cc077770ff077070cc077770ff077070cc077770ff077070cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
c0888888807770cc0777770ff07770cc0777770ff07770cc0777770ff07770cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
c00000888800000c0677760fff00000c0677760fff00000c0f777f0fff00000ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0f777f0880999990c06660fff0888880c06660fff0888880c0fff0fff0888880cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
077770880900000ccc0005550800000ccc0005550800000ccc0005550800000ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
077f08888099990ccc0555555088880ccc0555555088880ccc0555555088880ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
c0000888880000ccccc05555550000ccccc05555550000ccccc05555550000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccc000000cccccccccc000000cccccccccc000000cccccccccc000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bbbbbbbbbbbbbbbbbbbbbbbbbbbb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bbbbbbbbbbbbbbbbbbbbbbbbbbbb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33333333333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33333333333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb333333333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb333333333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb3333333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb3333333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb333333333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bb3333bbbb33bb333333333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000000000000000000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb333333bb3300cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc00bb3333bbbb33bb33333333bb00cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
__map__
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 01424344

